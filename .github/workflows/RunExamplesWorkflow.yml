name: Example Repo

run-name: "${{github.actor}}: Running Example repo tests after ${{github.event.head_commit.message}}"

on:
    push:
        branches:
            - "TriggerActionInExampleRepo"

            
jobs:
    RunExampleWorkflow:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/github-script@v7
          with:
            github-token: ${{ secrets.DISPATCHEXAMPLEWORKFLOWPAT }}
            script: |
                await github.rest.actions.createWorkflowDispatch({
                    owner: 'KStocky',
                    repo: 'ShaderTestFrameworkExamples',
                    workflow_id: 'BuildAndRunTests.yml',
                    ref: 'main',
                    inputs: {
                        actor: '${{github.actor}}',
                        repository: '${{github.event.repository.name}}',
                        message: '${{github.event.head_commit.message}}'
                    }
                })  